<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login/Register</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        .swal2-icon.swal2-success {
            border-color: #a5dc86 !important;
            border-width: 5px !important;
            width: 5px !important;
            height: 80px !important;
        }
        .swal2-icon.swal2-success [class^=swal2-success-line] {
            position: absolute !important;
            height: 5px !important;
            width: 47px !important;
            transform: rotate(45deg) !important;
            border-radius: 0 !important;
        }
        .swal2-icon.swal2-success [class^=swal2-success-line][class$=tip] {
            top: 46px !important;
            left: 17px !important;
            width: 25px !important;
            transform: rotate(-45deg) !important;
        }
        .swal2-icon.swal2-success [class^=swal2-success-line][class$=long] {
            top: 39px !important;
            right: 16px !important;
            width: 47px !important;
            transform: rotate(-45deg) !important;
        }
        .swal2-icon.swal2-success:after,
        .swal2-icon.swal2-success:before {
            content: "" !important;
            border-radius: 50% !important;
            position: absolute !important;
            width: 60px !important;
            height: 120px !important;
            background: #fff !important;
            transform: rotate(45deg) !important;
        }
        .swal2-icon.swal2-success:before {
            top: -7px !important;
            left: -33px !important;
            display: block !important;
            width: 120px !important;
            height: 240px !important;
            transform: rotate(-45deg) !important;
            border-radius: 120px / 60px !important;
        }
        .swal2-icon.swal2-success:after {
            bottom: -7px !important;
            right: -33px !important;
            transform: rotate(-45deg) !important;
            border-radius: 0 !important;
        }
        .swal2-icon.swal2-success .swal2-success-ring {
            position: absolute !important;
            width: 80px !important;
            height: 80px !important;
            transform: rotate(-45deg) !important;
            border-radius: 50% !important;
            border: 4px solid hsla(98, 55%, 66%, 0.2) !important;
        }
        .swal2-icon.swal2-success .swal2-success-fix {
            position: absolute !important;
            top: 14px !important;
            left: -2px !important;
            z-index: 1 !important;
            border: 4px solid #a5dc86 !important;
            width: 70px !important;
            height: 70px !important;
            border-radius: 50% !important;
            box-shadow: 0 0 2px #a5dc86 !important;
            animation: swal2-animate-success-icon .42s !important;
        }
        .swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]:after {
            content: "" !important;
            width: 15px !important;
            height: 24px !important;
            position: absolute !important;
            border: 4px solid !important;
            border-top-color: transparent !important;
            border-left-color: transparent !important;
            top: 1px !important;
            left: 6px !important;
            transform: rotate(45deg) !important;
        }
        .swal2-icon.swal2-success [class^=swal2-success-line][class$=long]:after {
            content: "" !important;
            height: 60px !important;
            width: 7px !important;
            position: absolute !important;
            border-radius: 2px !important;
            background: #fff !important;
            top: -4px !important;
            left: 26px !important;
            transform: rotate(-45deg) !important;
        }
    </style>
</head>
<body>
    <%- include('../../views/partials/user/header') %>
    <!-- End Header Area -->

    <!-- Start Banner Area -->
    <section class="banner-area organic-breadcrumb">
        <div class="container">
            <div class="breadcrumb-banner d-flex flex-wrap align-items-center justify-content-end">
                <div class="col-first">
                    <h1>Login/Register</h1>
                    <nav class="d-flex align-items-center">
                        <a href="index.html">Home<span class="lnr lnr-arrow-right"></span></a>
                        <a href="category.html">Login/Register</a>
                    </nav>
                </div>
            </div>
        </div>
    </section>
    <!-- End Banner Area -->

    <!--================Login Box Area =================-->
    <section class="login_box_area section_gap">
        <div class="container">
            <div class="row">
                <div class="col-lg-6">
                    <div class="login_box_img">
                        <img class="img-fluid" src="img/login.jpg" alt="">
                        <div class="hover">
                            <h4>New to our website?</h4>
                            <p>There are advances being made in science and technology everyday, and a good example of this is the</p>
                            <a class="primary-btn" href="/signup">Create an Account</a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="login_form_inner">
                        <h3>Log in to enter</h3>
                        <form class="row login_form" id="loginForm" novalidate="novalidate">
                            <div class="col-md-12 form-group">
                                <input type="text" class="form-control" id="email" name="email" placeholder="Enter email" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Enter email'">
                            </div>
                            <div class="col-md-12 form-group">
                                <input type="password" class="form-control" id="password" name="password" placeholder="Password" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Password'">
                            </div>
                            <div class="col-md-12 form-group">
                                <div class="creat_account">
                                    <input type="checkbox" id="f-option2" name="selector">
                                    <label for="f-option2">Keep me logged in</label>
                                </div>
                            </div>
                            <div class="col-md-12 form-group">
                                <a href="/auth/google">
                                <button type="button" class="btn btn-google w-100">
                                    <img src="https://i.pinimg.com/736x/68/3d/9a/683d9a1a8150ee8b29bfd25d46804605.jpg" alt="Google Logo" style="width: 20px; height: 20px; margin-right: 10px;">
                                    Sign Up with Google
                                </button></a>
                            </div>
                            <div class="col-md-12 form-group">
                                <button type="submit" class="primary-btn">Log In</button>
                                <a href="/forgot-Password">Forgot Password?</a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!--================End Login Box Area =================-->

    <!-- start footer Area -->
    <footer class="footer-area section_gap">
        <div class="container">
            <div class="row">
                <div class="col-lg-3  col-md-6 col-sm-6">
                    <div class="single-footer-widget">
                        <h6>About Us</h6>
                        <p>
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore dolore
                            magna aliqua.
                        </p>
                    </div>
                </div>
                <div class="col-lg-4  col-md-6 col-sm-6">
                    <div class="single-footer-widget">
                        <h6>Newsletter</h6>
                        <p>Stay update with our latest</p>
                        <div class="" id="mc_embed_signup">
                            <form action="/login" method="post" class="form-inline">
                                <div class="d-flex flex-row">
                                    <input class="form-control" name="EMAIL" placeholder="Enter Email" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Enter Email '"
                                     required="" type="email">
                                    <button class="click-btn btn btn-default"><i class="fa fa-long-arrow-right" aria-hidden="true"></i></button>
                                    <div style="position: absolute; left: -5000px;">
                                        <input name="b_36c4fd991d266f23781ded980_aefe40901a" tabindex="-1" value="" type="text">
                                    </div>
                                </div>
                                <div class="info"></div>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3  col-md-6 col-sm-6">
                    <div class="single-footer-widget mail-chimp">
                        <h6 class="mb-20">Instragram Feed</h6>
                        <ul class="instafeed d-flex flex-wrap">
                            <li><img src="img/i1.jpg" alt=""></li>
                            <li><img src="img/i2.jpg" alt=""></li>
                            <li><img src="img/i3.jpg" alt=""></li>
                            <li><img src="img/i4.jpg" alt=""></li>
                            <li><img src="img/i5.jpg" alt=""></li>
                            <li><img src="img/i6.jpg" alt=""></li>
                            <li><img src="img/i7.jpg" alt=""></li>
                            <li><img src="img/i8.jpg" alt=""></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-2 col-md-6 col-sm-6">
                    <div class="single-footer-widget">
                        <h6>Follow Us</h6>
                        <p>Let us be social</p>
                        <div class="footer-social d-flex align-items-center">
                            <a href="#"><i class="fa fa-facebook"></i></a>
                            <a href="#"><i class="fa fa-twitter"></i></a>
                            <a href="#"><i class="fa fa-dribbble"></i></a>
                            <a href="#"><i class="fa fa-behance"></i></a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="footer-bottom d-flex justify-content-center align-items-center flex-wrap">
                <p class="footer-text m-0"><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
    Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
    <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
    </p>
            </div>
        </div>
    </footer>
    <!-- End footer Area -->

    <script src="js/vendor/jquery-2.2.4.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
     crossorigin="anonymous"></script>
    <script src="js/vendor/bootstrap.min.js"></script>
    <script src="js/jquery.ajaxchimp.min.js"></script>
    <script src="js/jquery.nice-select.min.js"></script>
    <script src="js/jquery.sticky.js"></script>
    <script src="js/nouislider.min.js"></script>
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <!--gmaps Js-->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCjCGmQ0Uq4exrzdcL6rvxywDDOvfAu6eE"></script>
    <script src="js/gmaps.min.js"></script>
    <script src="js/main.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const loginForm = document.getElementById('loginForm');

            loginForm.addEventListener('submit', async function(event) {
                event.preventDefault();

                const formData = new FormData(loginForm);
                const data = {};
                formData.forEach((value, key) => {
                    data[key] = value;
                });

                try {
                    const response = await fetch('/signin', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(data)
                    });

                    const result = await response.json();

                    if (response.ok) {
                        Swal.fire({
                            icon: 'success',
                            title: 'Success',
                            text: result.message || 'Login successful!',
                            customClass: {
                                icon: 'swal2-icon-custom'
                            }
                        }).then(() => {
                            window.location.href = '/';
                        });
                    } else {
                        Swal.fire({
                            icon: 'error',
                            title: 'Error',
                            text: result.message || 'Login failed!',
                        });
                    }
                } catch (error) {
                    Swal.fire({
                        icon: 'error',
                        title: 'Error',
                        text: 'An error occurred while trying to log in.',
                    });
                }
            });
        });
    </script>
</body>
</html>
